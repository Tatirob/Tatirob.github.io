{"request":{"hurl":"http:\/\/localhost\/bk\/wp-content\/plugins\/uni-woo-custom-product-options\/assets\/js\/uni-cpo-front.js","inline":"","enable_minification":true,"type":"js","handle":"uni-cpo-front"},"log":{"url":"\/wp-content\/plugins\/uni-woo-custom-product-options\/assets\/js\/uni-cpo-front.js","success":true},"code":"window.Parsley.setLocale( \"en\" );\nwindow.Parsley.addValidator( 'filemaxmegabytes', {\nrequirementType: 'string',\nvalidateString: function ( value, requirement, parsleyInstance ){\nvar file=parsleyInstance.$element[ 0 ].files;\nvar maxBytes=requirement * 1048576;\nif ( file.length== 0 ){\nreturn !0}\nreturn file.length=== 1 && file[ 0 ].size <= maxBytes},\nmessages: {\nen: 'File is to big'}}).addValidator( 'filemimetypes', {\nrequirementType: 'string',\nvalidateString: function ( value, requirement, parsleyInstance ){\nvar file=parsleyInstance.$element[ 0 ].files;\nif ( file.length== 0 ){\nreturn !0}\nvar allowedMimeTypes=requirement.replace( \/\\s\/g, \"\" ).split( ',' );\nreturn allowedMimeTypes.indexOf( file[ 0 ].type ) !==-1},\nmessages: {\nen: 'File mime type not allowed'}});\nfunction uni_cpo_clear_hidden_fields(){\njQuery( unicpo.selector_opts_all ).each( function (){\nvar $el=jQuery( this ),\nelType=this.type || this.tagName.toLowerCase();\nif ( elType== 'checkbox' && $el.hasClass( \"uni-cpo-excluded-from-validation\" ) ){\njQuery( 'input[name=\"'+this.name+'\"]:checked' ).each( function (){\njQuery( this ).prop( \"checked\", !1 )})}else if ( elType== 'radio' && $el.hasClass( \"uni-cpo-excluded-from-validation\" ) ){\n$el.prop( \"checked\", !1 )}else if ( elType== 'text' && $el.hasClass( \"uni-cpo-excluded-from-validation\" ) ){\n$el.val( '' )}else if ( elType== 'select-one' && $el.hasClass( \"uni-cpo-excluded-from-validation\" ) ){\n$el.val( '' )}else if ( $el.hasClass( \"uni-cpo-excluded-from-validation\" ) ){\n$el.val( '' )}})}\nfunction uniCpoIsNumber( n ){\nreturn !isNaN( parseFloat( n ) ) && isFinite( n )}\njQuery.fn.uniNumVal=function (){\nreturn parseFloat( this.val() ) || 0}\nfunction uniIsInt( n ){\nreturn Number( n )=== n && n % 1=== 0}\nfunction uniIsFloat( n ){\nreturn Number( n )=== n && n % 1 !== 0}\nfunction uniArrayUnique( array ){\nvar a=array.concat();\nfor ( var i=0; i < a.length; ++i ){\nfor ( var j=i+1; j < a.length; ++j ){\nif ( a[ i ]=== a[ j ] )\na.splice( j--, 1 )}}\nreturn a}\nfunction uni_get_var_obj_for_cond( type, slug ){\nvar obj={\nfields: '',\nmain: '',\nend: '',\nstart: ''};\nif ( typeof type !== 'undefined' ){\nswitch ( type ){\ncase 'checkboxes' :\nobj.fields=jQuery( '[name=\"'+slug+'\\\\[\\\\]\"]' );\nobj.main=jQuery( '[name=\"'+slug+'\\\\[\\\\]\"]:checked' );\nbreak;\ncase 'radio' :\nobj.fields=jQuery( '[name=\"'+slug+'\"]' );\nobj.main=jQuery( '[name=\"'+slug+'\"]:checked' );\nbreak;\ncase 'date_picker' :\nobj.main=jQuery( '#'+slug+'-field' );\nobj.end=jQuery( '#'+slug+'-field-end' );\nbreak;\ncase 'notice' :\nobj.main='';\nbreak;\ncase 'notice_nonoptionvar' :\nobj.main='';\nbreak;\ncase 'heading' :\nobj.main='';\nbreak;\ncase 'divider' :\nobj.main='';\nbreak;\ncase 'google_maps' :\nobj.main=jQuery( '#'+slug+'-field' );\nobj.start=jQuery( '#'+slug+'-field-start' );\nbreak;\ncase 'range_slider' :\nobj.main=jQuery( '#'+slug+'-field' );\nobj.end=jQuery( '#'+slug+'-field-end' );\nbreak;\ndefault :\nobj.main=jQuery( '[name='+slug+']' );\nbreak}}\nreturn obj}\nfunction uni_get_var_val_for_cond( type, $field, slug ){\nvar val={\nvalue: '',\nvalue_start: '',\nvalue_end: '',\nvalues: [],\nduration: 0,\ncount: 0,\ncount_spaces: 0};\nif ( typeof type !== 'undefined' && '' !== $field ){\nswitch ( type ){\ncase 'text_input' :\nval.value=$field.main.val();\nval.count_spaces=val.value.length;\nvar without_spaces=val.value.replace( \/ \/g, \"\" );\nval.count=without_spaces.length;\nbreak;\ncase 'image_select' :\nval.value=$field.main.find( \":selected\" ).val();\nbreak;\ncase 'palette_select' :\nval.value=$field.main.find( \":selected\" ).val();\nbreak;\ncase 'date_picker' :\nvar fieldDateFormat=jQuery( '#'+slug+'-format' ).val();\nval.value=$field.main.val();\nval.value_end=$field.end.val();\nif ( val.value_end ){\nvar fieldParsedDateStart=moment( val.value, fieldDateFormat ),\nfieldParsedDateEnd=moment( val.value_end, fieldDateFormat );\nval.duration=moment.duration( fieldParsedDateEnd.diff( fieldParsedDateStart ) ).asDays()}\nbreak;\ncase 'checkboxes' :\n$field.main.each( function ( i ){\nval.values[ i ]=jQuery( this ).val()});\nval.count=val.values.length;\nbreak;\ncase 'google_maps' :\nval.value=$field.main.val();\nval.value_start=$field.start.val();\nval.distance=jQuery( '#'+slug+'-field-distance' ).val();\nbreak;\ncase 'range_slider' :\nif ( \/;\/.test( $field.main.val() ) ){\nvar field_value=$field.main.val().split( ';' );\nval.value=field_value[ 0 ];\nval.end=field_value[ 1 ]}else {\nval.value=$field.main.val()}\nbreak;\ndefault :\nval.value=$field.main.val();\nbreak}}\nreturn val}\nvar uniCpoTransformPaletteSelect=function ( selector ){\nvar $dropdown=jQuery( selector ),\nval_selected=$dropdown.val(),\ndropdownName=$dropdown.attr( \"name\" ),\n$dropdownOptions=jQuery( selector+' option' ),\nis_layered=$dropdown.data( 'layered' );\n$dropdown.after( '<ul id=\"'+dropdownName+'_list\" class=\"uni-cpo-palette-select-list\"><\/ul><div class=\"uni-cpo-clear\"><\/div>' );\nvar $list=$dropdown.next( '#'+dropdownName+'_list' );\nif ( is_layered && 'yes'=== is_layered ){\nvar $layer=jQuery( '#palette-layer-'+dropdownName ),\n$elWrapper=jQuery( unicpo.image_selector ),\n$uni_cpo_main_image_layered_image=jQuery('.uni_cpo_main_image_layered_image');\nif ( $elWrapper.length > 0 ){\nvar layeredWidth=$elWrapper.innerWidth();\n$uni_cpo_main_image_layered_image.css('height', layeredWidth)}}\n$dropdownOptions.each( function ( i, el ){\nvar $el=jQuery( el ),\nelVal=$el.val(),\nelColor=$el.data( \"color\" ),\nelThumbTitle=$el.data( \"imagetitle\" );\nif ( val_selected && val_selected=== elVal ){\n$list.append( '<li class=\"active\"><a href=\"#\" data-value=\"'+elVal+'\" data-hex=\"'+elColor+'\" style=\"background:'+elColor+'\" title=\"'+elThumbTitle+'\"><\/a><\/li>' );\nif ( is_layered && 'yes'=== is_layered ){\nUniCpo.colorify( $layer, elColor )}}else {\n$list.append( '<li><a href=\"#\" data-value=\"'+elVal+'\" data-hex=\"'+elColor+'\" style=\"background:'+elColor+'\" title=\"'+elThumbTitle+'\"><\/a><\/li>' )}});\nif ( !val_selected ){\n$list.children( 'li:eq(0)' ).addClass( 'active' );\nif ( is_layered && 'yes'=== is_layered ){\nvar $first_option=$dropdownOptions.first(),\nfirst_opt_color=$first_option.data( \"color\" );\nUniCpo.colorify( $layer, first_opt_color )}}\n$list.children( 'li' ).children( 'a' ).on( \"click\", function ( e ){\ne.preventDefault();\nvar $aEl=jQuery( e.target ),\n$liEl=$aEl.parent(),\nval=$aEl.data( \"value\" ),\nhex=$aEl.data( \"hex\" );\n$list.children( 'li.active' ).removeClass( 'active' );\n$liEl.addClass( 'active' );\n$dropdown.val( val );\nif ( is_layered && 'yes'=== is_layered ){\nvar last_slide_index=jQuery( '.flex-control-thumbs li' ).index( jQuery( '.flex-control-thumbs li:last' ) );\nif ( jQuery.flexslider ){\njQuery( '.woocommerce-product-gallery' ).flexslider( last_slide_index )}\nUniCpo.colorify( $layer, hex )}\n$dropdown.trigger( \"change\" );\njQuery( document.body ).trigger( 'cpo_options_palette_select_selected_event', [ dropdownName, val, hex ] )})};\nvar uniCpoTransformImageSelect=function ( obj ){\nvar $dropdown=obj,\ndropdownName=$dropdown.attr( 'name' ),\n$dropdownOptions=$dropdown.find( 'option' ),\nval_selected=$dropdown.find( \":selected\" ).val();\n$dropdown.after( '<ul id=\"'+dropdownName+'_list\" data-option-slug=\"'+dropdownName+'\" class=\"uni-cpo-image-select-list\"><\/ul><div class=\"uni-cpo-clear\"><\/div>' );\nvar $list=$dropdown.next( '#'+dropdownName+'_list' );\n$dropdownOptions.each( function ( i, el ){\nvar $el=jQuery( el ),\nelVal=$el.val(),\nelThumbUri=$el.data( \"thumbimageuri\" ),\nelThumbTitle=$el.data( \"imagetitle\" );\nif ( !elVal ){\nreturn}\nif ( val_selected && val_selected=== elVal ){\n$list.append( '<li class=\"active\"><a href=\"#\" data-value=\"'+elVal+'\" title=\"'+elThumbTitle+'\"><img src=\"'+elThumbUri+'\" alt=\"\" \/><\/a><\/li>' )}else {\n$list.append( '<li><a href=\"#\" data-value=\"'+elVal+'\" title=\"'+elThumbTitle+'\"><img src=\"'+elThumbUri+'\" alt=\"\" \/><\/a><\/li>' )}});\nif ( !val_selected ){\n$list.children( 'li:eq(0)' ).addClass( 'active' )}\n$list.children( 'li' ).children( 'a' ).on( 'click', 'img', function ( e ){\ne.preventDefault();\nvar $imgEl=jQuery( e.target ),\n$aEl=$imgEl.parent(),\n$liEl=$aEl.parent(),\n$ulEl=$liEl.parent(),\nvalSelected=$aEl.data( 'value' ),\noption_slug=$ulEl.data( 'option-slug' ),\n$dropdown=jQuery( '#'+option_slug+'-field' );\n$ulEl.children( 'li.active' ).removeClass( 'active' );\n$liEl.addClass( 'active' );\n$dropdown.val( valSelected );\n$dropdown.trigger( 'change' );\nuni_cpo_flexslider_go_first();\nuniCpoReplaceProductImage( $dropdown );\njQuery( document.body ).trigger( 'cpo_options_image_select_selected_event', [ option_slug, valSelected ] )})};\nvar uniCpoTransfromTextSelect=function ( selector ){\nvar $dropdown=jQuery( selector ),\nval_selected=$dropdown.val(),\ndropdown_name=$dropdown.attr( \"name\" ),\n$dropdown_options=jQuery( selector+' option' );\n$dropdown.after( '<ul id=\"'+dropdown_name+'_list\" class=\"uni-cpo-text-select-list\"><\/ul><div class=\"uni-cpo-clear\"><\/div>' );\nvar $list=$dropdown.next( '#'+dropdown_name+'_list' );\n$dropdown_options.each( function ( i, el ){\nvar $el=jQuery( el ),\nelVal=$el.val(),\nelTitle=$el.data( 'suboptiontitle' ),\nelTooltipTitle=$el.data( 'tooltiptext' );\nif ( val_selected && val_selected=== elVal ){\n$list.append( '<li class=\"active\"><a href=\"#\" data-value=\"'+elVal+'\" title=\"'+elTooltipTitle+'\">'+elTitle+'<\/a><\/li>' )}else {\n$list.append( '<li><a href=\"#\" data-value=\"'+elVal+'\" title=\"'+elTooltipTitle+'\">'+elTitle+'<\/a><\/li>' )}});\nif ( !val_selected ){\n$list.children( 'li:eq(0)' ).addClass( 'active' )}\n$list.children( 'li' ).children( 'a' ).on( \"click\", function ( e ){\ne.preventDefault();\nvar $aEl=jQuery( e.target ),\n$liEl=$aEl.parent(),\nval=$aEl.data( \"value\" );\n$list.children( 'li.active' ).removeClass( 'active' );\n$liEl.addClass( 'active' );\n$dropdown.val( val );\n$dropdown.trigger( \"change\" );\njQuery( document.body ).trigger( 'cpo_options_text_select_selected_event', [ dropdown_name, val ] )})};\nvar uniCpoBetterFileUpload=function ( selector ){\nvar $input=jQuery( selector ),\n$label=$input.nextAll( 'label' ),\nlabelVal=$label.html();\n$input.val( '' );\n$input.parsley().validate();\n$input.on( 'change', function ( e ){\nvar fileName='';\nif ( this.files && this.files.length > 1 ){\nfileName=( this.getAttribute( 'data-multiple-caption' ) || '' ).replace( '{count}', this.files.length )}else if ( e.target.value ){\nfileName=e.target.value.split( '\\\\' ).pop()}\nif ( fileName ){\n$label.find( 'span' ).html( fileName )}else {\n$label.html( labelVal )}});\n$input.on( 'focus', function (){\n$input.addClass( 'has-focus' )}).on( 'blur', function (){\n$input.removeClass( 'has-focus' )})};\nvar uniCpoReplaceProductImage=function ( target ){\nif ( target instanceof jQuery ){\nvar $dropdown=target}else {\nvar $dropdown=jQuery( target )}\nvar $elImageContainer=uni_cpo_wc_image_container();\nif ( !$elImageContainer ){\nreturn !1}\nvar $img_link=$elImageContainer.find( 'a' ),\n$img=$img_link.find( 'img' );\nvar uniDefDataObj=UniCpo.uni_cpo_default_main_product_image;\nif ( typeof uniDefDataObj=== 'undefined' ){\nconsole.info( 'Uni CPO: the default image or its container is not found! For more info please read the documentation: http:\/\/moomoo.agency\/demo\/cpo\/docs\/#faq' );\nreturn !1}\nif ( $dropdown.hasClass( 'uni-cpo-exclude-image-change' ) ){\nreturn !1}\nvar uniOptionDataObj={};\nuniOptionDataObj.fullimageuri=$dropdown.find( ':selected' ).data( 'fullimageuri' ),\nuniOptionDataObj.imagetitle=$dropdown.find( ':selected' ).data( 'imagetitle' ),\nuniOptionDataObj.imageuri=$dropdown.find( ':selected' ).data( 'imageuri' ),\nuniOptionDataObj.imagesrcset=$dropdown.find( ':selected' ).data( 'imagesrcset' );\nuniOptionDataObj.imagesizes=$dropdown.find( ':selected' ).data( 'imagesizes' );\nif ( $dropdown.hasClass( 'uni-cpo-excluded-from-validation' ) ){\nvar uniFinalDataObj=uniDefDataObj}else {\nif ( typeof uniOptionDataObj.imageuri !== 'undefined' && uniOptionDataObj.imageuri !== uniDefDataObj.imageuri ){\nvar uniFinalDataObj=uniOptionDataObj}else {\nvar uniFinalDataObj=uniDefDataObj}}\n$img.parent().attr( 'href', uniFinalDataObj.fullimageuri );\n$img.parent().attr( 'title', uniFinalDataObj.imagetitle );\n$img.attr( 'title', uniFinalDataObj.imagetitle );\n$img.attr( 'alt', uniFinalDataObj.imagetitle );\n$img.attr( 'src', uniFinalDataObj.imageuri );\n$img.attr( 'srcset', uniFinalDataObj.imagesrcset );\n$img.attr( 'sizes', uniFinalDataObj.imagesizes );\njQuery( document.body ).trigger( 'cpo_options_product_image_replaced_event', [ $dropdown, $img, uniFinalDataObj ] )};\n","status":true}